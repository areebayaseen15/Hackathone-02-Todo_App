# Phase I Specification: In-Memory Python Console Todo Application

> **Specification Document**
> Version: 1.0
> Phase: I
> Status: DRAFT - PENDING APPROVAL
> Constitution Reference: CONSTITUTION.md v1.0

---

## 1. Overview

### 1.1 Purpose
This specification defines the requirements for Phase I of the "Evolution of Todo" project: an in-memory Python console application for managing personal tasks.

### 1.2 Scope
- **In Scope**: Command-line todo application with in-memory storage
- **Out of Scope**: Databases, file persistence, authentication, web/API, multi-user support

### 1.3 Constraints
| Constraint | Description |
|------------|-------------|
| Storage | In-memory only; data lost on application exit |
| User Model | Single user; no authentication required |
| Interface | Console/terminal only; menu-based interaction |
| Persistence | None; no files, no databases |
| Network | None; no API, no web concepts |

---

## 2. Task Data Model

### 2.1 Task Entity

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `id` | Integer | Unique, Auto-generated, Positive | Unique identifier for the task |
| `title` | String | Required, 1-100 characters, Non-empty after trim | Short descriptive name of the task |
| `description` | String | Optional, 0-500 characters | Detailed description of the task |
| `is_completed` | Boolean | Default: False | Completion status of the task |
| `created_at` | DateTime | Auto-generated, Immutable | Timestamp when task was created |

### 2.2 Field Validation Rules

#### ID
- Must be a positive integer
- Auto-generated by the system
- Sequential starting from 1
- Never reused within a session

#### Title
- Cannot be empty or whitespace-only
- Must be between 1 and 100 characters after trimming
- Leading and trailing whitespace is trimmed

#### Description
- Can be empty (optional field)
- Maximum 500 characters
- Leading and trailing whitespace is trimmed

#### Is Completed
- Boolean value only (True/False)
- Defaults to False on task creation

#### Created At
- Auto-generated at task creation time
- Cannot be modified after creation
- Display format: YYYY-MM-DD HH:MM:SS

---

## 3. Feature Specifications

### 3.1 Feature: Add Task

#### User Story
```
AS A user
I WANT TO add a new task with a title and optional description
SO THAT I can track items I need to complete
```

#### Interaction Flow
1. User selects "Add Task" from main menu
2. System prompts for task title
3. User enters title
4. System validates title
5. System prompts for task description (optional)
6. User enters description or presses Enter to skip
7. System creates task with auto-generated ID and timestamp
8. System displays confirmation with task details
9. System returns to main menu

#### Acceptance Criteria
- [ ] AC-1.1: System accepts a title between 1-100 characters
- [ ] AC-1.2: System accepts an optional description up to 500 characters
- [ ] AC-1.3: System auto-generates a unique sequential ID
- [ ] AC-1.4: System auto-generates created_at timestamp
- [ ] AC-1.5: System sets is_completed to False by default
- [ ] AC-1.6: System displays confirmation message with task ID
- [ ] AC-1.7: System trims whitespace from title and description

#### Error Cases
| Error Condition | System Response |
|-----------------|-----------------|
| Empty title | Display error: "Title cannot be empty" |
| Whitespace-only title | Display error: "Title cannot be empty" |
| Title exceeds 100 chars | Display error: "Title must be 100 characters or less" |
| Description exceeds 500 chars | Display error: "Description must be 500 characters or less" |

---

### 3.2 Feature: View Task List

#### User Story
```
AS A user
I WANT TO view all my tasks with their status
SO THAT I can see what I need to do and what I have completed
```

#### Interaction Flow
1. User selects "View Tasks" from main menu
2. System retrieves all tasks from memory
3. System displays tasks in a formatted list
4. System returns to main menu

#### Display Format
```
================================================================================
                              YOUR TASKS
================================================================================
ID    | Status      | Title                          | Created
--------------------------------------------------------------------------------
1     | [ ]         | Buy groceries                  | 2025-12-29 10:30:00
2     | [X]         | Call dentist                   | 2025-12-29 09:15:00
3     | [ ]         | Finish report                  | 2025-12-29 11:45:00
--------------------------------------------------------------------------------
Total: 3 tasks (1 completed, 2 pending)
================================================================================
```

#### Status Indicators
- `[ ]` = Pending (is_completed = False)
- `[X]` = Completed (is_completed = True)

#### Acceptance Criteria
- [ ] AC-2.1: System displays all tasks in memory
- [ ] AC-2.2: System shows ID, status, title, and created date for each task
- [ ] AC-2.3: System uses [ ] for pending and [X] for completed tasks
- [ ] AC-2.4: System displays total count with completed/pending breakdown
- [ ] AC-2.5: System handles empty task list gracefully
- [ ] AC-2.6: Tasks are displayed in order of creation (by ID)

#### Error Cases
| Error Condition | System Response |
|-----------------|-----------------|
| No tasks exist | Display message: "No tasks found. Add a task to get started!" |

---

### 3.3 Feature: Update Task

#### User Story
```
AS A user
I WANT TO update the title and description of an existing task
SO THAT I can correct mistakes or add more details
```

#### Interaction Flow
1. User selects "Update Task" from main menu
2. System prompts for task ID
3. User enters task ID
4. System validates ID and retrieves task
5. System displays current task details
6. System prompts for new title (Enter to keep current)
7. User enters new title or presses Enter
8. System prompts for new description (Enter to keep current)
9. User enters new description or presses Enter
10. System updates task
11. System displays confirmation with updated details
12. System returns to main menu

#### Acceptance Criteria
- [ ] AC-3.1: System allows updating title field
- [ ] AC-3.2: System allows updating description field
- [ ] AC-3.3: System preserves field value when user presses Enter without input
- [ ] AC-3.4: System validates new title (1-100 chars, non-empty)
- [ ] AC-3.5: System validates new description (0-500 chars)
- [ ] AC-3.6: System does NOT modify ID, is_completed, or created_at
- [ ] AC-3.7: System displays confirmation with updated task details

#### Error Cases
| Error Condition | System Response |
|-----------------|-----------------|
| Invalid ID format | Display error: "Invalid ID. Please enter a number" |
| ID not found | Display error: "Task with ID {id} not found" |
| No tasks exist | Display error: "No tasks available to update" |
| New title empty | Display error: "Title cannot be empty" |
| New title too long | Display error: "Title must be 100 characters or less" |
| New description too long | Display error: "Description must be 500 characters or less" |

---

### 3.4 Feature: Delete Task

#### User Story
```
AS A user
I WANT TO delete a task by its ID
SO THAT I can remove tasks I no longer need
```

#### Interaction Flow
1. User selects "Delete Task" from main menu
2. System prompts for task ID
3. User enters task ID
4. System validates ID and retrieves task
5. System displays task details and asks for confirmation
6. User confirms deletion (y/n)
7. System deletes task from memory
8. System displays confirmation
9. System returns to main menu

#### Acceptance Criteria
- [ ] AC-4.1: System prompts for task ID to delete
- [ ] AC-4.2: System displays task details before deletion
- [ ] AC-4.3: System requires confirmation before deleting
- [ ] AC-4.4: System removes task from memory on confirmation
- [ ] AC-4.5: System cancels deletion if user does not confirm
- [ ] AC-4.6: System displays success message after deletion
- [ ] AC-4.7: Deleted task IDs are not reused

#### Error Cases
| Error Condition | System Response |
|-----------------|-----------------|
| Invalid ID format | Display error: "Invalid ID. Please enter a number" |
| ID not found | Display error: "Task with ID {id} not found" |
| No tasks exist | Display error: "No tasks available to delete" |
| User cancels | Display message: "Deletion cancelled" |

---

### 3.5 Feature: Mark Task Complete/Incomplete

#### User Story
```
AS A user
I WANT TO toggle the completion status of a task
SO THAT I can track my progress
```

#### Interaction Flow
1. User selects "Toggle Task Status" from main menu
2. System prompts for task ID
3. User enters task ID
4. System validates ID and retrieves task
5. System toggles is_completed status
6. System displays confirmation with new status
7. System returns to main menu

#### Acceptance Criteria
- [ ] AC-5.1: System prompts for task ID
- [ ] AC-5.2: System toggles is_completed from False to True
- [ ] AC-5.3: System toggles is_completed from True to False
- [ ] AC-5.4: System displays confirmation with new status
- [ ] AC-5.5: System shows clear indication of new state ("marked as complete" or "marked as incomplete")

#### Error Cases
| Error Condition | System Response |
|-----------------|-----------------|
| Invalid ID format | Display error: "Invalid ID. Please enter a number" |
| ID not found | Display error: "Task with ID {id} not found" |
| No tasks exist | Display error: "No tasks available" |

---

## 4. CLI Interaction Flow

### 4.1 Main Menu

```
================================================================================
                         TODO APPLICATION - PHASE I
================================================================================

Please select an option:

  [1] Add Task
  [2] View Tasks
  [3] Update Task
  [4] Delete Task
  [5] Toggle Task Status
  [6] Exit

Enter your choice (1-6): _
```

### 4.2 Menu Navigation Rules
- User enters a number (1-6) to select an option
- Invalid input displays error and re-prompts
- After each operation, system returns to main menu
- Option 6 exits the application with confirmation

### 4.3 Exit Flow
1. User selects "Exit"
2. System displays warning about data loss
3. System asks for confirmation
4. On confirmation: Display goodbye message and terminate
5. On cancel: Return to main menu

#### Exit Confirmation Message
```
WARNING: All tasks will be lost when you exit.
Are you sure you want to exit? (y/n): _
```

### 4.4 Input Handling
- All inputs are case-insensitive where applicable (y/Y, n/N)
- Leading and trailing whitespace is trimmed from all inputs
- Empty input (just Enter) is handled per feature specification

---

## 5. Application Behavior

### 5.1 Startup
1. Application displays welcome banner
2. Application initializes empty task storage
3. Application displays main menu

#### Welcome Banner
```
================================================================================
          WELCOME TO TODO APPLICATION - PHASE I
          In-Memory Console Version
================================================================================
```

### 5.2 Shutdown
1. Display confirmation prompt (with data loss warning)
2. On confirm: Display goodbye message
3. Terminate application

#### Goodbye Message
```
================================================================================
Thank you for using Todo Application!
Goodbye!
================================================================================
```

### 5.3 Error Handling Principles
- All errors display user-friendly messages
- No stack traces shown to user
- After error, user is prompted to try again or return to menu
- Application never crashes on invalid input

---

## 6. Project Structure

```
todo-app/
├── CONSTITUTION.md          # Global constitution (immutable)
├── CLAUDE.md                # Claude Code instructions
├── README.md                # Setup and usage instructions
├── pyproject.toml           # Project configuration (UV)
├── specs/
│   └── PHASE-I-SPEC.md      # This specification
└── src/
    └── todo/
        ├── __init__.py      # Package marker
        ├── main.py          # Application entry point
        ├── models.py        # Task data model
        ├── storage.py       # In-memory storage manager
        ├── services.py      # Business logic
        └── cli.py           # CLI interface and menus
```

### 6.1 Module Responsibilities

| Module | Responsibility |
|--------|----------------|
| `main.py` | Application entry point, initialization |
| `models.py` | Task dataclass definition |
| `storage.py` | In-memory task storage (list management) |
| `services.py` | Task operations (add, update, delete, toggle) |
| `cli.py` | Menu display, user input handling, output formatting |

---

## 7. Technology Requirements

### 7.1 Runtime
- Python 3.13 or higher

### 7.2 Package Manager
- UV (for dependency management and virtual environment)

### 7.3 Dependencies
- Standard library only (no external packages required for Phase I)

### 7.4 Development Tools
- Claude Code (AI-assisted development)
- Spec-Kit Plus (specification management)

---

## 8. Deliverables Checklist

### 8.1 Documentation
- [ ] `CONSTITUTION.md` - Global constitution file
- [ ] `README.md` - Setup and usage instructions
- [ ] `CLAUDE.md` - Claude Code instructions
- [ ] `specs/PHASE-I-SPEC.md` - This specification

### 8.2 Source Code
- [ ] `src/todo/__init__.py` - Package marker
- [ ] `src/todo/main.py` - Entry point
- [ ] `src/todo/models.py` - Task model
- [ ] `src/todo/storage.py` - Storage manager
- [ ] `src/todo/services.py` - Business logic
- [ ] `src/todo/cli.py` - CLI interface

### 8.3 Configuration
- [ ] `pyproject.toml` - UV project configuration

### 8.4 Functional Requirements
- [ ] Add Task - fully functional
- [ ] View Tasks - fully functional
- [ ] Update Task - fully functional
- [ ] Delete Task - fully functional
- [ ] Toggle Status - fully functional

---

## 9. Acceptance Test Scenarios

### 9.1 Add Task Scenarios
| Scenario | Input | Expected Result |
|----------|-------|-----------------|
| Valid task | Title: "Buy milk" | Task created with ID 1 |
| With description | Title: "Buy milk", Desc: "2% milk" | Task created with description |
| Empty description | Title: "Buy milk", Desc: [Enter] | Task created, description empty |
| Empty title | Title: [Enter] | Error: "Title cannot be empty" |
| Long title | Title: 101 characters | Error: "Title must be 100 characters or less" |

### 9.2 View Task Scenarios
| Scenario | State | Expected Result |
|----------|-------|-----------------|
| Empty list | No tasks | Message: "No tasks found" |
| Single task | 1 task | Display 1 task with details |
| Multiple tasks | 3 tasks | Display all 3 tasks in order |
| Mixed status | 2 pending, 1 complete | Correct status indicators |

### 9.3 Update Task Scenarios
| Scenario | Input | Expected Result |
|----------|-------|-----------------|
| Valid update | ID: 1, New title: "Updated" | Task title updated |
| Keep title | ID: 1, Title: [Enter] | Title unchanged |
| Invalid ID | ID: 999 | Error: "Task with ID 999 not found" |
| Non-numeric ID | ID: "abc" | Error: "Invalid ID" |

### 9.4 Delete Task Scenarios
| Scenario | Input | Expected Result |
|----------|-------|-----------------|
| Confirm delete | ID: 1, Confirm: y | Task deleted |
| Cancel delete | ID: 1, Confirm: n | Task preserved |
| Invalid ID | ID: 999 | Error: "Task with ID 999 not found" |

### 9.5 Toggle Status Scenarios
| Scenario | Initial State | Expected Result |
|----------|---------------|-----------------|
| Complete task | is_completed: False | is_completed: True |
| Uncomplete task | is_completed: True | is_completed: False |
| Invalid ID | ID: 999 | Error: "Task with ID 999 not found" |

---

## 10. Constraints Enforcement

### 10.1 Prohibited Elements
The following are **EXPLICITLY FORBIDDEN** in Phase I:

- Database connections or queries
- File read/write operations
- Network/HTTP requests
- Authentication/authorization logic
- User management
- API endpoints or routes
- Web frameworks
- External package dependencies
- Multi-threading or async operations
- Configuration files for persistence
- Environment variables for storage
- Any reference to Phases II-V features

### 10.2 Constitution Compliance
This specification complies with:
- Article I: Spec-driven development hierarchy
- Article II: No feature invention beyond specification
- Article III: Phase I scope isolation
- Article IV: Python 3.13+, UV technology stack
- Article V: Clean architecture, separation of concerns

---

## 11. Glossary

| Term | Definition |
|------|------------|
| Task | A single todo item with title, description, and status |
| In-Memory | Data stored in application memory, lost on exit |
| CLI | Command Line Interface |
| Toggle | Switch between two states (complete/incomplete) |
| Menu-Based | User navigates by selecting numbered options |

---

## 12. Revision History

| Version | Date | Author | Changes |
|---------|------|--------|---------|
| 1.0 | 2025-12-29 | Claude Code | Initial specification |

---

## 13. Approval

**Specification Status**: DRAFT - PENDING APPROVAL

**Approval Required Before**:
- Plan generation
- Task breakdown
- Implementation

---

*This specification fully defines Phase I of the Evolution of Todo project and must be followed exactly during implementation.*
